{
  "version": "0.1",
  "catchAll": {
    "onReceive": [],
    "next": [
      {
        "condition": "event.text === 'delete()'",
        "node": "delete_diary"
      }
    ]
  },
  "startNode": "confidence_checker",
  "nodes": [
    {
      "id": "a4b4c1f87e",
      "name": "got_availability",
      "next": [
        {
          "condition": "true",
          "node": "check_entity"
        }
      ],
      "onEnter": [
        "setStateVariable {\"name\":\"type\",\"value\":\"message_availability\"}"
      ],
      "onReceive": null
    },
    {
      "id": "51ced9ad4e",
      "name": "none",
      "next": [
        {
          "condition": "true",
          "node": "stage.flow.json"
        }
      ],
      "onEnter": [
        "say #!builtin_text-NDU1D3",
        "setStateVariable {\"name\":\"type\",\"value\":\"message_none\"}"
      ],
      "onReceive": null
    },
    {
      "id": "5889aabcb6",
      "name": "confidence_checker",
      "next": [
        {
          "condition": "event.nlu.intent.confidence > 0.6",
          "node": "intent_router"
        },
        {
          "condition": "true",
          "node": "none"
        }
      ],
      "onEnter": [
        "debug {\"obj\":\"\"}"
      ],
      "onReceive": null
    },
    {
      "id": "fa72255c31",
      "name": "got_planned",
      "next": [
        {
          "condition": "true",
          "node": "check_entity"
        }
      ],
      "onEnter": [
        "setStateVariable {\"name\":\"type\",\"value\":\"message_planned\"}"
      ],
      "onReceive": null
    },
    {
      "id": "33ce46b367",
      "name": "got_done",
      "next": [
        {
          "condition": "true",
          "node": "check_entity"
        }
      ],
      "onEnter": [
        "setStateVariable {\"name\":\"type\",\"value\":\"message_done\"}"
      ],
      "onReceive": null
    },
    {
      "id": "3db2ebcd14",
      "name": "send_diary",
      "next": [],
      "onEnter": [
        "getUserDiary {}",
        "markdownDiary {}",
        "say #!builtin_text-GjV1Kd"
      ],
      "onReceive": null
    },
    {
      "id": "7b2309a164",
      "name": "goto_stage",
      "next": [
        {
          "condition": "true",
          "node": "stage.flow.json"
        }
      ],
      "onEnter": [
        "say #!builtin_text-liN_7H"
      ],
      "onReceive": null
    },
    {
      "id": "96534a834a",
      "name": "intent_router",
      "next": [
        {
          "condition": "event.nlu.intent.name === 'message_availability'",
          "node": "got_availability"
        },
        {
          "condition": "event.nlu.intent.name === 'message_blocked'",
          "node": "got_blocked"
        },
        {
          "condition": "event.nlu.intent.name === 'message_planned'",
          "node": "got_planned"
        },
        {
          "condition": "event.nlu.intent.name === 'message_done'",
          "node": "got_done"
        },
        {
          "condition": "event.nlu.intent.name === 'want_diary'",
          "node": "send_diary"
        },
        {
          "condition": "true",
          "node": "none"
        }
      ],
      "onEnter": [],
      "onReceive": null
    },
    {
      "id": "3347e34215",
      "name": "delete_diary",
      "next": [
        {
          "condition": "true",
          "node": "send_diary"
        }
      ],
      "onEnter": [
        "deleteDiary {}"
      ],
      "onReceive": null
    },
    {
      "id": "569056fe83",
      "name": "got_entity",
      "next": [
        {
          "condition": "true",
          "node": "goto_stage"
        }
      ],
      "onEnter": [
        "setStateVariable {\"name\":\"type\",\"value\":\"{{event.nlu.entities.0.type}}\"}"
      ],
      "onReceive": null
    },
    {
      "id": "39f5d4fdcc",
      "name": "got_blocked",
      "next": [
        {
          "condition": "true",
          "node": "check_entity"
        }
      ],
      "onEnter": [
        "setStateVariable {\"name\":\"type\",\"value\":\"message_blocked\"}"
      ],
      "onReceive": null
    },
    {
      "id": "9a368c31ec",
      "name": "check_entity",
      "next": [
        {
          "condition": "event.nlu.entities.length > 0 && event.nlu.intent.confidence < 0.9",
          "node": "got_entity"
        },
        {
          "condition": "true",
          "node": "goto_stage"
        }
      ],
      "onEnter": [],
      "onReceive": null
    }
  ]
}